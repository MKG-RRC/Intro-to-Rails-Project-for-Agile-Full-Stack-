<div class="container py-4">
  <h1 class="fw-bold mb-4">Programs</h1>

  <!--  Search + Filter Form (keep this part as is) -->
  <div class="card shadow-sm mb-4">
    <div class="card-body">
      <%= form_with url: programs_path, method: :get, local: true, class: "row g-2 align-items-end" do %>
        <div class="col-md-4">
          <%= label_tag :q, "Search Programs", class: "form-label fw-semibold" %>
          <%= text_field_tag :q, params[:q], placeholder: "Enter program name or keyword", class: "form-control" %>
        </div>
        <div class="col-md-4">
          <%= label_tag :university_id, "Filter by University", class: "form-label fw-semibold" %>
          <%= select_tag :university_id,
              options_from_collection_for_select(@universities, :id, :name, params[:university_id]),
              include_blank: "All Universities",
              class: "form-select" %>
        </div>
        <div class="col-md-2">
          <%= submit_tag "Filter", class: "btn btn-dark w-100" %>
        </div>
        <div class="col-md-2">
          <%= link_to "Clear", programs_path, class: "btn btn-outline-secondary w-100" %>
        </div>
      <% end %>
    </div>
  </div>

  <!--  Programs Grid -->
  <% if @programs.any? %>
    <div class="row g-4">
      <% @programs.each do |p| %>
        <div class="col-md-4 col-sm-6">
          <div class="card h-100 shadow-sm border-0">
            <div class="card-body d-flex flex-column">
              <h5 class="card-title fw-bold">
                <%= link_to p.name, p, class: "text-decoration-none text-dark" %>
              </h5>
              <p class="card-text text-muted">
                <%= truncate(p.description, length: 100) %>
              </p>
              <p class="mt-auto text-secondary small">
                <strong>University:</strong>
                <%= link_to p.university.name, p.university, class: "text-decoration-none" %>
              </p>
            </div>
            <div class="card-footer bg-transparent border-0 text-end">
              <%= link_to "Edit", edit_program_path(p), class: "btn btn-sm btn-outline-secondary" %>
              <%= link_to "Delete", p, method: :delete, data: { confirm: "Are you sure?" }, class: "btn btn-sm btn-danger" %>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <p class="text-center text-muted py-3">No programs found.</p>
  <% end %>

  <!--  Pagination -->
  <div class="d-flex justify-content-center mt-4">
    <%= paginate @programs %>
  </div>

  <!--  New Program -->
  <div class="mt-4 text-center">
    <%= link_to "New Program", new_program_path, class: "btn btn-primary" %>
  </div>
</div>
